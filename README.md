# pagination
Проект реализует следующие задачи:
- [x] Пагинированный прием получения картинки в base64 строке по эндпоинту /image (при помощи библиотеки [flask](https://github.com/pallets/flask)).
- Для этого в теле POST запроса реализованы поля:
  - id: номер чанка
  - total: всего чанков,
  - chunk: собственно сам чанк
- Финальный запрос после приема и конвертации всех чанков в JSON строку содержит следующие поля
  - extension: Расширение картинки (png, jpg, jpeg ...),
  - size: размер картинки в килобайтах,
  - description: описание картинки,
  - title: название картинки,
  - tags: тэги картинки (например природа, пейзаж, анфас и прочее),
  - base64: картинка в формате base 64 строки
- [x] Проверка того, что присланная картинка действительно является картинкой указанного типа (при помощи библиотеки [filetype](https://github.com/h2non/filetype.py)).
- [x] Сохранение картинки в папке gallery с соответствующим названием.
- [x] Сохранение относительного пути картинки, тегов, описания и названия в базу данных PostgreSQL. Создание таблицы с соотвествующими полями строкового типа (при помощи библиотеки [psycopg2](https://github.com/psycopg/psycopg2)).
  - [ ] Создание бэкапа базы данных в формате sql
- [x] Отклонение всех запросов, в которых размер файла превышает 1 MB
- [x] Возвращение соответствующих статусов, если проверка не была пройдена по каким-либо причинам. Выбор статусов обоснован.
- [x] Реализация инкапсуляции приема пагинированных запросов и логики работы с базой данных в отдельные классы.
- [x] Ведение журнала статусов загрузки изображений в файле logs.txt, с указанием даты.
- [x] Всё подготовлено для помещения приложения в контейнер Podman и создан dockerfile.
- [x] Создана README.md инструкция для проекта.
- [x] Создан репозиторий Git (вы находитесь здесь) c историей коммитов
## Инструкция для сборки проекта в Podman
1. Скачайте и установите [Podman Desktop](https://podman-desktop.io/downloads).
2. Запустив `Podman Desktop` убедитесь, что ваша система соотвествует требуемым характеристикам и установите саму службу `podman`
3. Во вкладке `Images` создайте новый образ (`image`), используя файл `dockerfile.txt`.\
  Или же откройте командную строку, перейдите в каталог проекта и пропишите команду:
```
podman build -t image_name
```
4. В той же вкладке загрузите с сервера образ `PostgreSQL 16` через поиск. Или пропишите в командной строке
```
podman pull docker.io/library/postgres
```
5. В командной строке пропишите:
```
podman network create mynetwork
```
6. Во вкладке `Containers` запустите контейнер с образом PostgreSQL. Установите имя контейнера `postgres`, а переменным окружения задайте значения `POSTGRES_PASSWORD=123`, `POSTGRES_USER=postgres`, `POSTGRES_DB=postgress`. Во вкладке `Networking` установите пункт `Uder-defined network` и выберете созданную сеть. Или пропишите в командной строке:
```
podman run --name postgres -e POSTGRES_PASSWORD=123 -e POSTGRES_USER=postgres -e POSTGRES_DB=postgress --network mynetwork -d docker.io/library/postgres
```
7. В той же вкладке запустите контейнер с образом проекта. Настройте `volume` для путей `/pagination/gallery` и `/pagination/logs`. Укажите ту же сеть, в которой находится контейнер `postgres`.
8. Откройте браузер, перейдите на страницу http://localhost:3000/ и проверьте работу приложения
